"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.response = exports.request = void 0;
const utils_1 = require("@aws-appsync/utils");
const helpers_1 = require("../lib/helpers");
function request(ctx) {
    // add timestamps
    const item = (0, helpers_1.createItem)(ctx.args.input);
    const id = utils_1.util.autoId();
    // const key = {
    //   id: item.employeeId,
    //   sk: "ITEM#" + id,
    // };
    // const itemParams = {
    //   publishDate: util.time.nowISO8601(),
    //   ...item,
    //   GSI1PK: "INVENTORY#" + item.inventoryId,
    //   GSI1SK: "ITEM#" + id,
    //   GSI2PK: "ITEM",
    // };
    // return ddb.put(
    //   key,
    //   itemParams
    // )
    return {
        operation: "PutItem",
        key: {
            PK: utils_1.util.dynamodb.toDynamoDB(item.employeeId),
            SK: utils_1.util.dynamodb.toDynamoDB("ITEM#" + id),
        },
        attributeValues: utils_1.util.dynamodb.toMapValues({
            publishDate: utils_1.util.time.nowISO8601(),
            ...item,
            GSI1PK: item.inventoryId,
            GSI1SK: "ITEM#" + id,
            GSI2SK: "ITEM",
            GSI2PK: "ITEM#" + id,
        }),
    };
}
exports.request = request;
function response(ctx) {
    return ctx.result;
}
exports.response = response;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlSXRlbS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNyZWF0ZUl0ZW0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsOENBQTJFO0FBQzNFLDRDQUE0QztBQUc1QyxTQUFnQixPQUFPLENBQ3JCLEdBQW9DO0lBRXBDLGlCQUFpQjtJQUNqQixNQUFNLElBQUksR0FBRyxJQUFBLG9CQUFVLEVBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUV4QyxNQUFNLEVBQUUsR0FBRyxZQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFFekIsZ0JBQWdCO0lBQ2hCLHlCQUF5QjtJQUN6QixzQkFBc0I7SUFDdEIsS0FBSztJQUNMLHVCQUF1QjtJQUN2Qix5Q0FBeUM7SUFDekMsYUFBYTtJQUNiLDZDQUE2QztJQUM3QywwQkFBMEI7SUFDMUIsb0JBQW9CO0lBQ3BCLEtBQUs7SUFFTCxrQkFBa0I7SUFDbEIsU0FBUztJQUNULGVBQWU7SUFDZixJQUFJO0lBRUosT0FBTztRQUNMLFNBQVMsRUFBRSxTQUFTO1FBQ3BCLEdBQUcsRUFBRTtZQUNILEVBQUUsRUFBRSxZQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDO1lBQzdDLEVBQUUsRUFBRSxZQUFJLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO1NBQzNDO1FBQ0QsZUFBZSxFQUFFLFlBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDO1lBQ3pDLFdBQVcsRUFBRSxZQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRTtZQUNuQyxHQUFHLElBQUk7WUFDUCxNQUFNLEVBQUUsSUFBSSxDQUFDLFdBQVc7WUFDeEIsTUFBTSxFQUFFLE9BQU8sR0FBRyxFQUFFO1lBQ3BCLE1BQU0sRUFBRSxNQUFNO1lBQ2QsTUFBTSxFQUFFLE9BQU8sR0FBRyxFQUFFO1NBQ3JCLENBQUM7S0FDSCxDQUFDO0FBQ0osQ0FBQztBQXhDRCwwQkF3Q0M7QUFFRCxTQUFnQixRQUFRLENBQUMsR0FBa0I7SUFDekMsT0FBTyxHQUFHLENBQUMsTUFBTSxDQUFDO0FBQ3BCLENBQUM7QUFGRCw0QkFFQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbnRleHQsIER5bmFtb0RCUHV0SXRlbVJlcXVlc3QsIHV0aWwgfSBmcm9tIFwiQGF3cy1hcHBzeW5jL3V0aWxzXCI7XG5pbXBvcnQgeyBjcmVhdGVJdGVtIH0gZnJvbSBcIi4uL2xpYi9oZWxwZXJzXCI7XG5pbXBvcnQgeyBNdXRhdGlvbkNyZWF0ZUl0ZW1BcmdzLCBJdGVtIH0gZnJvbSBcIi4uL3R5cGVzL2FwcHN5bmNcIjtcbmltcG9ydCAqIGFzIGRkYiBmcm9tIFwiQGF3cy1hcHBzeW5jL3V0aWxzL2R5bmFtb2RiXCI7XG5leHBvcnQgZnVuY3Rpb24gcmVxdWVzdChcbiAgY3R4OiBDb250ZXh0PE11dGF0aW9uQ3JlYXRlSXRlbUFyZ3M+XG4pOiBEeW5hbW9EQlB1dEl0ZW1SZXF1ZXN0IHtcbiAgLy8gYWRkIHRpbWVzdGFtcHNcbiAgY29uc3QgaXRlbSA9IGNyZWF0ZUl0ZW0oY3R4LmFyZ3MuaW5wdXQpO1xuXG4gIGNvbnN0IGlkID0gdXRpbC5hdXRvSWQoKTtcblxuICAvLyBjb25zdCBrZXkgPSB7XG4gIC8vICAgaWQ6IGl0ZW0uZW1wbG95ZWVJZCxcbiAgLy8gICBzazogXCJJVEVNI1wiICsgaWQsXG4gIC8vIH07XG4gIC8vIGNvbnN0IGl0ZW1QYXJhbXMgPSB7XG4gIC8vICAgcHVibGlzaERhdGU6IHV0aWwudGltZS5ub3dJU084NjAxKCksXG4gIC8vICAgLi4uaXRlbSxcbiAgLy8gICBHU0kxUEs6IFwiSU5WRU5UT1JZI1wiICsgaXRlbS5pbnZlbnRvcnlJZCxcbiAgLy8gICBHU0kxU0s6IFwiSVRFTSNcIiArIGlkLFxuICAvLyAgIEdTSTJQSzogXCJJVEVNXCIsXG4gIC8vIH07XG5cbiAgLy8gcmV0dXJuIGRkYi5wdXQoXG4gIC8vICAga2V5LFxuICAvLyAgIGl0ZW1QYXJhbXNcbiAgLy8gKVxuXG4gIHJldHVybiB7XG4gICAgb3BlcmF0aW9uOiBcIlB1dEl0ZW1cIixcbiAgICBrZXk6IHtcbiAgICAgIFBLOiB1dGlsLmR5bmFtb2RiLnRvRHluYW1vREIoaXRlbS5lbXBsb3llZUlkKSxcbiAgICAgIFNLOiB1dGlsLmR5bmFtb2RiLnRvRHluYW1vREIoXCJJVEVNI1wiICsgaWQpLFxuICAgIH0sXG4gICAgYXR0cmlidXRlVmFsdWVzOiB1dGlsLmR5bmFtb2RiLnRvTWFwVmFsdWVzKHtcbiAgICAgIHB1Ymxpc2hEYXRlOiB1dGlsLnRpbWUubm93SVNPODYwMSgpLFxuICAgICAgLi4uaXRlbSxcbiAgICAgIEdTSTFQSzogaXRlbS5pbnZlbnRvcnlJZCxcbiAgICAgIEdTSTFTSzogXCJJVEVNI1wiICsgaWQsXG4gICAgICBHU0kyU0s6IFwiSVRFTVwiLFxuICAgICAgR1NJMlBLOiBcIklURU0jXCIgKyBpZCxcbiAgICB9KSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc3BvbnNlKGN0eDogQ29udGV4dDxJdGVtPikge1xuICByZXR1cm4gY3R4LnJlc3VsdDtcbn1cbiJdfQ==